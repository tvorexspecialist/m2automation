<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->
<actionGroups xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="../../../../../../../dev/tests/acceptance/vendor/magento/magento2-functional-testing-framework/src/Magento/FunctionalTestingFramework/Test/etc/actionGroupSchema.xsd">
    <actionGroup name="CreateCartPriceRule">
        <arguments>
            <argument name="name" defaultValue="testData.ruleName"/>
            <argument name="website" defaultValue="testData.website"/>
            <argument name="customerGroup" defaultValue="testData.customerGroup"/>
            <argument name="couponType" defaultValue="testData.couponType"/>
            <argument name="shippingType" defaultValue="testData.shippingType"/>
        </arguments>
        <click selector="{{CartPriceRuleSection.market}}" stepKey="clickOnMarketing"></click>
        <waitForPageLoad stepKey="waitForPageMarketingIsLoaded" />
        <click selector="{{CartPriceRuleSection.discount}}" stepKey="CreateDiscountSection" />
        <waitForPageLoad stepKey="waitForPageDiscountAccountIsLoaded"/>
        <click selector="{{CartPriceRuleSection.add}}" stepKey="ClickToAddDiscount"/>
        <waitForPageLoad stepKey="waitForPageDiscountPageIsLoaded"/>
        <fillField selector="{{CartPriceRuleSection.ruleName}}" userInput="{{name}}" stepKey="setRuleName"/>
        <click selector="{{CartPriceRuleSection.selectWebSite(website)}}" stepKey="clickToSelectWebsite"/>
        <click selector="{{CartPriceRuleSection.customerGroup}}" stepKey="clickToSelectCustomerGroup"/>
        <click selector="{{CartPriceRuleSection.customerGroupValue(customerGroup)}}" stepKey="SelectCustomerGroup"/>
        <click selector="{{CartPriceRuleSection.coupon}}" stepKey="clickToExpandCoupons"/>
        <click selector="{{CartPriceRuleSection.specificCoupon(couponType)}}" stepKey="clickToSelectCoupons"/>
        <fillField selector="{{CartPriceRuleSection.code}}" userInput="{{testData.cartCode}}" stepKey="setCode"/>
        <fillField selector="{{CartPriceRuleSection.userPerCustomer}}" userInput="0" stepKey="setUserPerCustomer"/>
        <fillField selector="{{CartPriceRuleSection.userPerCoupon}}" userInput="0" stepKey="setUserPerCoupon"/>
        <fillField selector="{{CartPriceRuleSection.priority}}" userInput="0" stepKey="setPriority"/>
        <scrollTo selector="{{CartPriceRuleSection.actions}}" stepKey="ScrollToActions"/>
        <conditionalClick selector="{{CartPriceRuleSection.actions}}" dependentSelector="{{CartPriceRuleSection.actionsState}}" visible="true" stepKey="clickToExpandActions"/>
        <waitForPageLoad stepKey="waitForActionsLoaded"/>
        <click selector="{{CartPriceRuleSection.freeShipping}}" stepKey="clickToSelectShippingMethod"/>
        <click selector="{{CartPriceRuleSection.option(shippingType)}}" stepKey="clickToSelectShippingType"/>
        <click selector="{{CartPriceRuleSection.save}}" stepKey="clickToSaveCartPriceRule"/>
        <waitForPageLoad stepKey="waitForCartPriceRuleSaved"/>
        <see userInput="You saved the rule." stepKey="RuleSaved"/>
    </actionGroup>

</actionGroups>
