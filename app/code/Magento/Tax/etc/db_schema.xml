<?xml version="1.0"?>
<schema xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:setup:Model/Declaration/Schema/etc/schema.xsd">
    <table name="tax_class" resource="default">
        <column xsi:type="smallint" name="class_id" padding="6" unsigned="false" nullable="false" identity="true"/>
        <column xsi:type="varchar" name="class_name" nullable="false" length="255"/>
        <column xsi:type="varchar" name="class_type" nullable="false" length="8" default="CUSTOMER"/>
        <constraint xsi:type="primary" name="PRIMARY">
            <column name="class_id"/>
        </constraint>
    </table>
    <table name="tax_calculation_rule" resource="default">
        <column xsi:type="int" name="tax_calculation_rule_id" padding="11" unsigned="false" nullable="false"
                identity="true"/>
        <column xsi:type="varchar" name="code" nullable="false" length="255"/>
        <column xsi:type="int" name="priority" padding="11" unsigned="false" nullable="false" identity="false"/>
        <column xsi:type="int" name="position" padding="11" unsigned="false" nullable="false" identity="false"/>
        <column xsi:type="int" name="calculate_subtotal" padding="11" unsigned="false" nullable="false"
                identity="false"/>
        <constraint xsi:type="primary" name="PRIMARY">
            <column name="tax_calculation_rule_id"/>
        </constraint>
        <index name="TAX_CALCULATION_RULE_PRIORITY_POSITION" indexType="btree">
            <column name="priority"/>
            <column name="position"/>
        </index>
        <index name="TAX_CALCULATION_RULE_CODE" indexType="btree">
            <column name="code"/>
        </index>
    </table>
    <table name="tax_calculation_rate" resource="default">
        <column xsi:type="int" name="tax_calculation_rate_id" padding="11" unsigned="false" nullable="false"
                identity="true"/>
        <column xsi:type="varchar" name="tax_country_id" nullable="false" length="2"/>
        <column xsi:type="int" name="tax_region_id" padding="11" unsigned="false" nullable="false" identity="false"/>
        <column xsi:type="varchar" name="tax_postcode" nullable="true" length="21"/>
        <column xsi:type="varchar" name="code" nullable="false" length="255"/>
        <column xsi:type="decimal" name="rate" scale="12" precission="4" unsigned="false" nullable="false" default="0"/>
        <column xsi:type="smallint" name="zip_is_range" padding="6" unsigned="false" nullable="true" identity="false"/>
        <column xsi:type="int" name="zip_from" padding="11" unsigned="true" nullable="true" identity="false"/>
        <column xsi:type="int" name="zip_to" padding="11" unsigned="true" nullable="true" identity="false"/>
        <constraint xsi:type="primary" name="PRIMARY">
            <column name="tax_calculation_rate_id"/>
        </constraint>
        <index name="TAX_CALCULATION_RATE_TAX_COUNTRY_ID_TAX_REGION_ID_TAX_POSTCODE" indexType="btree">
            <column name="tax_country_id"/>
            <column name="tax_region_id"/>
            <column name="tax_postcode"/>
        </index>
        <index name="TAX_CALCULATION_RATE_CODE" indexType="btree">
            <column name="code"/>
        </index>
        <index name="IDX_CA799F1E2CB843495F601E56C84A626D" indexType="btree">
            <column name="tax_calculation_rate_id"/>
            <column name="tax_country_id"/>
            <column name="tax_region_id"/>
            <column name="zip_is_range"/>
            <column name="tax_postcode"/>
        </index>
    </table>
    <table name="tax_calculation" resource="default">
        <column xsi:type="int" name="tax_calculation_id" padding="11" unsigned="false" nullable="false"
                identity="true"/>
        <column xsi:type="int" name="tax_calculation_rate_id" padding="11" unsigned="false" nullable="false"
                identity="false"/>
        <column xsi:type="int" name="tax_calculation_rule_id" padding="11" unsigned="false" nullable="false"
                identity="false"/>
        <column xsi:type="smallint" name="customer_tax_class_id" padding="6" unsigned="false" nullable="false"
                identity="false"/>
        <column xsi:type="smallint" name="product_tax_class_id" padding="6" unsigned="false" nullable="false"
                identity="false"/>
        <constraint xsi:type="primary" name="PRIMARY">
            <column name="tax_calculation_id"/>
        </constraint>
        <constraint xsi:type="foreign" name="TAX_CALCULATION_PRODUCT_TAX_CLASS_ID_TAX_CLASS_CLASS_ID"
                    table="tax_calculation" column="product_tax_class_id" referenceTable="tax_class"
                    referenceColumn="class_id" onDelete="CASCADE"/>
        <constraint xsi:type="foreign" name="TAX_CALCULATION_CUSTOMER_TAX_CLASS_ID_TAX_CLASS_CLASS_ID"
                    table="tax_calculation" column="customer_tax_class_id" referenceTable="tax_class"
                    referenceColumn="class_id" onDelete="CASCADE"/>
        <constraint xsi:type="foreign" name="TAX_CALC_TAX_CALC_RATE_ID_TAX_CALC_RATE_TAX_CALC_RATE_ID"
                    table="tax_calculation" column="tax_calculation_rate_id" referenceTable="tax_calculation_rate"
                    referenceColumn="tax_calculation_rate_id" onDelete="CASCADE"/>
        <constraint xsi:type="foreign" name="TAX_CALC_TAX_CALC_RULE_ID_TAX_CALC_RULE_TAX_CALC_RULE_ID"
                    table="tax_calculation" column="tax_calculation_rule_id" referenceTable="tax_calculation_rule"
                    referenceColumn="tax_calculation_rule_id" onDelete="CASCADE"/>
        <index name="TAX_CALCULATION_TAX_CALCULATION_RULE_ID" indexType="btree">
            <column name="tax_calculation_rule_id"/>
        </index>
        <index name="TAX_CALCULATION_CUSTOMER_TAX_CLASS_ID" indexType="btree">
            <column name="customer_tax_class_id"/>
        </index>
        <index name="TAX_CALCULATION_PRODUCT_TAX_CLASS_ID" indexType="btree">
            <column name="product_tax_class_id"/>
        </index>
        <index name="TAX_CALC_TAX_CALC_RATE_ID_CSTR_TAX_CLASS_ID_PRD_TAX_CLASS_ID" indexType="btree">
            <column name="tax_calculation_rate_id"/>
            <column name="customer_tax_class_id"/>
            <column name="product_tax_class_id"/>
        </index>
    </table>
    <table name="tax_calculation_rate_title" resource="default">
        <column xsi:type="int" name="tax_calculation_rate_title_id" padding="11" unsigned="false" nullable="false"
                identity="true"/>
        <column xsi:type="int" name="tax_calculation_rate_id" padding="11" unsigned="false" nullable="false"
                identity="false"/>
        <column xsi:type="smallint" name="store_id" padding="6" unsigned="true" nullable="false" identity="false"/>
        <column xsi:type="varchar" name="value" nullable="false" length="255"/>
        <constraint xsi:type="primary" name="PRIMARY">
            <column name="tax_calculation_rate_title_id"/>
        </constraint>
        <constraint xsi:type="foreign" name="TAX_CALCULATION_RATE_TITLE_STORE_ID_STORE_STORE_ID"
                    table="tax_calculation_rate_title" column="store_id" referenceTable="store"
                    referenceColumn="store_id" onDelete="CASCADE"/>
        <constraint xsi:type="foreign" name="FK_37FB965F786AD5897BB3AE90470C42AB" table="tax_calculation_rate_title"
                    column="tax_calculation_rate_id" referenceTable="tax_calculation_rate"
                    referenceColumn="tax_calculation_rate_id" onDelete="CASCADE"/>
        <index name="TAX_CALCULATION_RATE_TITLE_TAX_CALCULATION_RATE_ID_STORE_ID" indexType="btree">
            <column name="tax_calculation_rate_id"/>
            <column name="store_id"/>
        </index>
        <index name="TAX_CALCULATION_RATE_TITLE_STORE_ID" indexType="btree">
            <column name="store_id"/>
        </index>
    </table>
    <table name="tax_order_aggregated_created" resource="default">
        <column xsi:type="int" name="id" padding="11" unsigned="true" nullable="false" identity="true"/>
        <column xsi:type="date" name="period"/>
        <column xsi:type="smallint" name="store_id" padding="6" unsigned="true" nullable="true" identity="false"/>
        <column xsi:type="varchar" name="code" nullable="false" length="255"/>
        <column xsi:type="varchar" name="order_status" nullable="false" length="50"/>
        <column xsi:type="float" name="percent" scale="10" precission="0" unsigned="false" nullable="true" default="0"/>
        <column xsi:type="int" name="orders_count" padding="11" unsigned="true" nullable="false" identity="false"
                default="0"/>
        <column xsi:type="float" name="tax_base_amount_sum" scale="10" precission="0" unsigned="false" nullable="true"
                default="0"/>
        <constraint xsi:type="primary" name="PRIMARY">
            <column name="id"/>
        </constraint>
        <constraint xsi:type="foreign" name="TAX_ORDER_AGGREGATED_CREATED_STORE_ID_STORE_STORE_ID"
                    table="tax_order_aggregated_created" column="store_id" referenceTable="store"
                    referenceColumn="store_id" onDelete="CASCADE"/>
        <constraint xsi:type="unique" name="TAX_ORDER_AGGRED_CREATED_PERIOD_STORE_ID_CODE_PERCENT_ORDER_STS">
            <column name="period"/>
            <column name="store_id"/>
            <column name="code"/>
            <column name="percent"/>
            <column name="order_status"/>
        </constraint>
        <index name="TAX_ORDER_AGGREGATED_CREATED_STORE_ID" indexType="btree">
            <column name="store_id"/>
        </index>
    </table>
    <table name="tax_order_aggregated_updated" resource="default">
        <column xsi:type="int" name="id" padding="11" unsigned="true" nullable="false" identity="true"/>
        <column xsi:type="date" name="period"/>
        <column xsi:type="smallint" name="store_id" padding="6" unsigned="true" nullable="true" identity="false"/>
        <column xsi:type="varchar" name="code" nullable="false" length="255"/>
        <column xsi:type="varchar" name="order_status" nullable="false" length="50"/>
        <column xsi:type="float" name="percent" scale="10" precission="0" unsigned="false" nullable="true" default="0"/>
        <column xsi:type="int" name="orders_count" padding="11" unsigned="true" nullable="false" identity="false"
                default="0"/>
        <column xsi:type="float" name="tax_base_amount_sum" scale="10" precission="0" unsigned="false" nullable="true"
                default="0"/>
        <constraint xsi:type="primary" name="PRIMARY">
            <column name="id"/>
        </constraint>
        <constraint xsi:type="foreign" name="TAX_ORDER_AGGREGATED_UPDATED_STORE_ID_STORE_STORE_ID"
                    table="tax_order_aggregated_updated" column="store_id" referenceTable="store"
                    referenceColumn="store_id" onDelete="CASCADE"/>
        <constraint xsi:type="unique" name="TAX_ORDER_AGGRED_UPDATED_PERIOD_STORE_ID_CODE_PERCENT_ORDER_STS">
            <column name="period"/>
            <column name="store_id"/>
            <column name="code"/>
            <column name="percent"/>
            <column name="order_status"/>
        </constraint>
        <index name="TAX_ORDER_AGGREGATED_UPDATED_STORE_ID" indexType="btree">
            <column name="store_id"/>
        </index>
    </table>
</schema>
